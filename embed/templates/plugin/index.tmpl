{[template "/base/header" .]}

<div class="layui-fluid">
    <div class="layui-col-md12" style="padding: 5px;">
        <div class="layui-card">
            <div class="layui-card-body">
                <div id="list"></div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

layui.config({base: '{__STATIC__}/admin/layuiadmin/'}).use(['table','jquery','laytpl'], function(){
///
var admin = layui.admin
,$ = layui.$
,form = layui.form
,table = layui.table;


table.render({
    elem: '#list',
    url: '/plugin/list',
    title: '数据表',
    cols: [[
        {field:'name', title:'插件名称',width:130},
        {field:'ps', title:'说明'},
        {title:'操作', toolbar: '#cmdTpl', width:170, fixed: 'right'}
     ]],
    page: true
});


table.on('tool(list)', function(obj){
    switch(obj.event){
        case 'install':pluginInstall(obj);break;
        case 'uninstall':pluginUninstall(obj);break;
    };
});


function pluginInstall(obj){
    console.log(obj);
}

function pluginUninstall(obj){
    console.log(obj);
}

///
});
</script>


<script type="text/html" id="cmdTpl">

    <a class="layui-btn layui-btn-xs">设置</a>
    <a class="layui-btn layui-btn-xs" lay-event='install'>安装</a>
    <a class="layui-btn layui-btn-xs">卸载</a>

</script>
{[template "/base/footer" .]}